(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"1iTf":function(I,s,e){"use strict";e.r(s),e.d(s,"default",function(){return J});var E=e("DZo9"),v=e("8z0m"),o=e("+L6B"),m=e("2/Rp"),U=e("miYZ"),l=e("tsqr"),T=e("9og8"),D=e("fWQN"),P=e("mtLc"),g=e("tS8v"),c=e("yKVA"),p=e("879j"),n=e("WmNS"),_=e.n(n),i=e("q1tI"),t=e.n(i),a=e("6Ynu"),R=e("9kvl"),L=e("5dcc"),y=e("aCH8"),r=e.n(y),u=e("EVdn"),O=e.n(u),W=e("p46w"),d=e.n(W),F=e("z7Xi"),B=e("MZJn"),$=e("FPg8"),N,J=Object(R.e)(N=function(z){Object(c.a)(K,z);var V=Object(p.a)(K);function K(){var M;Object(D.a)(this,K);for(var A=arguments.length,S=new Array(A),C=0;C<A;C++)S[C]=arguments[C];return M=V.call.apply(V,[this].concat(S)),M.state={fileList:[],uploading:!1,file:{},firmwareVersion:B.a,firmwareDate:B.a},M.componentDidMount=Object(T.a)(_.a.mark(function h(){var f,j,b;return _.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Object($.b)();case 2:f=x.sent,j=f.code,b=f.data,j==200&&M.setState({firmwareVersion:b.version.firmwareVersion,firmwareDate:b.version.firmwareDate});case 6:case"end":return x.stop()}},h)})),M.beforeUpload=function(h){if(h.name.indexOf(".img")===-1&&h.name.indexOf(".gz")===-1&&h.name.indexOf(".gz")===-1){l.default.error("\u683C\u5F0F\u4E0D\u6B63\u786E");return}var f=h.size/1024/1024<300;if(!f)return l.default.error("\u6BCF\u4E2A\u6587\u4EF6\u5927\u5C0F\u4E0D\u5F97\u8D85\u8FC7 5MB!"),!1;M.setState({fileList:[h],file:h})},M.handleUpload=function(){var h=M.state.file;M.setState({uploading:!0});var f=new FormData;f.append("file",h);var j=Object(g.a)(M);return O.a.ajax({headers:{token:d.a.get("token")||""},xhrFields:{withCredentials:!1},url:"http://192.168.101.238:8080/system/ota/upgrade",type:"POST",data:f,async:!0,cache:!1,contentType:!1,processData:!1,success:function(G){G.code==200&&(l.default.success("\u6587\u4EF6\u4E0A\u4F20\u6210\u529F"),j.setState({uploading:!1}),Object(L.e)())},error:function(G){}}),!1},M}return Object(P.a)(K,[{key:"render",value:function(){var A=this,S=this.state,C=S.uploading,h=S.fileList,f=this.props.intl;return t.a.createElement("div",{style:{height:"100%"}},t.a.createElement(a.a,{title:f.formatMessage({id:"maintain.update.title"})},t.a.createElement("div",{style:{width:"100%",background:"#F5F7FD",borderRadius:"4px",padding:"17px 30px",marginBottom:"30px",display:"flex"}},t.a.createElement("div",{style:{marginRight:"88px"}},t.a.createElement("span",{style:{color:"#999999",fontSize:"12px"}},f.formatMessage({id:"maintain.update.firmwareVersion"})),t.a.createElement("div",{style:{color:"#333",fontSize:"16px"}},this.state.firmwareVersion)),t.a.createElement("div",null,t.a.createElement("span",{style:{color:"#999999",fontSize:"12px"}},f.formatMessage({id:"maintain.update.firmwareDate"})),t.a.createElement("div",{style:{color:"#333",fontSize:"16px"}},this.state.firmwareDate))),t.a.createElement("div",null,t.a.createElement("span",{style:{marginRight:"20px"}},f.formatMessage({id:"maintain.update.file"})),t.a.createElement(v.a,{beforeUpload:function(b){return A.beforeUpload(b)},name:"file",fileList:h,onRemove:function(b){return A.setState({fileList:[]}),!0},maxCount:1},t.a.createElement(m.a,{style:{width:"360px",height:"44px"}},h.length>=1?f.formatMessage({id:"maintain.update.uploadAgain"}):f.formatMessage({id:"maintain.update.chooseFile"}),t.a.createElement("i",null,t.a.createElement(F.a,null))))),t.a.createElement(m.a,{type:"primary",loading:C,disabled:h.length===0,onClick:function(){return A.handleUpload()},style:{marginBottom:"48px",width:"160px",marginTop:"20px",height:"44px"}},C?f.formatMessage({id:"maintain.update.upLoading"}):f.formatMessage({id:"maintain.update.updateFirmware"}))))}}]),K}(t.a.Component))||N},"5dcc":function(I,s,e){"use strict";e.d(s,"c",function(){return p}),e.d(s,"d",function(){return n}),e.d(s,"g",function(){return _}),e.d(s,"e",function(){return t}),e.d(s,"a",function(){return R}),e.d(s,"b",function(){return L}),e.d(s,"f",function(){return y});var E=e("jrin"),v=e("9og8"),o=e("WmNS"),m=e.n(o),U=e("MZJn"),l=e("fe1z"),T=e("p46w"),D=e.n(T),P=e("9kvl"),g=e("LvDl"),c=e.n(g);function p(r){return r===""||r===void 0||r===null}function n(r){return r===0?U.a:r}function _(r,u){return p(r)?u:r}function i(r,u){var O=(r-u)/1e3/3600/24,W=Math.floor(O),d=(O-W)*24,F=Math.floor(d),B=(d-F)*60,$=Math.floor(B),N=(B-$)*60,J=Math.floor(N),z=W+"\u5929"+F+"\u5C0F\u65F6"+$+"\u5206";return z}function t(){return a.apply(this,arguments)}function a(){return a=Object(v.a)(m.a.mark(function r(){var u,O;return m.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(l.c)();case 2:u=d.sent,O=u.code,O==200&&(P.d.push("/user/login"),D.a.remove("token"));case 5:case"end":return d.stop()}},r)})),a.apply(this,arguments)}function R(r){var u=c.a.trim(r);return u=u.replace(/[^\d^\.]+/g,"").replace(".","$#$").replace(/\./g,"").replace("$#$","."),u}function L(r){var u=c.a.trim(r);return u=u.replace(/[^\x00-\xff]/g,""),u}function y(r,u){for(var O in r)u.setFieldsValue(Object(E.a)({},O,r[O]))}},"6Ynu":function(I,s,e){"use strict";var E=e("k1fw"),v=e("q1tI"),o=e.n(v),m=function(l){return o.a.createElement("div",{style:Object(E.a)({height:"100%",background:"#fff",borderRadius:"7px"},l.style)},o.a.createElement("div",{style:{height:"54px",lineHeight:"54px",borderBottom:"1px solid #F5F7FD",fontWeight:"600",paddingLeft:"30px",color:"#333",fontSize:"18px"}},l.title," "),o.a.createElement("div",{style:{padding:"0px 30px",marginTop:"24px",color:"#333"}},l.children))};s.a=m},FPg8:function(I,s,e){"use strict";e.d(s,"b",function(){return U}),e.d(s,"a",function(){return T});var E=e("9og8"),v=e("WmNS"),o=e.n(v),m=e("t3Un");function U(){return l.apply(this,arguments)}function l(){return l=Object(E.a)(o.a.mark(function P(){var g,c=arguments;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g=c.length>0&&c[0]!==void 0?c[0]:{},n.abrupt("return",Object(m.a)("system/hardware/version",{method:"GET",params:{},body:JSON.stringify(g)},"http://192.168.101.238:8080/"));case 2:case"end":return n.stop()}},P)})),l.apply(this,arguments)}function T(){return D.apply(this,arguments)}function D(){return D=Object(E.a)(o.a.mark(function P(){var g,c=arguments;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g=c.length>0&&c[0]!==void 0?c[0]:{},n.abrupt("return",Object(m.a)("system/hardware/status",{method:"GET",params:{},body:JSON.stringify(g)},"http://192.168.101.238:8080/"));case 2:case"end":return n.stop()}},P)})),D.apply(this,arguments)}},MZJn:function(I,s,e){"use strict";e.d(s,"a",function(){return E});var E="--"},fe1z:function(I,s,e){"use strict";e.d(s,"a",function(){return U}),e.d(s,"b",function(){return T}),e.d(s,"c",function(){return P});var E=e("9og8"),v=e("WmNS"),o=e.n(v),m=e("t3Un");function U(){return l.apply(this,arguments)}function l(){return l=Object(E.a)(o.a.mark(function n(){var _,i=arguments;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return _=i.length>0&&i[0]!==void 0?i[0]:{},a.abrupt("return",Object(m.a)("host",{method:"GET",params:{},body:JSON.stringify(_)},"http://192.168.101.238:80/"));case 2:case"end":return a.stop()}},n)})),l.apply(this,arguments)}function T(){return D.apply(this,arguments)}function D(){return D=Object(E.a)(o.a.mark(function n(){var _,i=arguments;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return _=i.length>0&&i[0]!==void 0?i[0]:{},a.abrupt("return",Object(m.a)("user/login",{method:"POST",params:{},body:JSON.stringify(_)},"http://192.168.101.238:8080/"));case 2:case"end":return a.stop()}},n)})),D.apply(this,arguments)}function P(){return g.apply(this,arguments)}function g(){return g=Object(E.a)(o.a.mark(function n(){var _,i=arguments;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return _=i.length>0&&i[0]!==void 0?i[0]:{},a.abrupt("return",Object(m.a)("user/exit",{method:"GET",params:{},body:JSON.stringify(_)},"http://192.168.101.238:8080/"));case 2:case"end":return a.stop()}},n)})),g.apply(this,arguments)}function c(){return p.apply(this,arguments)}function p(){return p=Object(E.a)(o.a.mark(function n(){var _,i=arguments;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return _=i.length>0&&i[0]!==void 0?i[0]:{},a.abrupt("return",Object(m.a)("miner/summary",{method:"GET",params:{},body:JSON.stringify(_)},"http://192.168.101.238:8080/"));case 2:case"end":return a.stop()}},n)})),p.apply(this,arguments)}},t3Un:function(I,s,e){"use strict";e.d(s,"a",function(){return c});var E=e("9og8"),v=e("k1fw"),o=e("WmNS"),m=e.n(o),U=e("Qyje"),l=e.n(U),T=function(n,_){var i=n,t=Object.keys(_);return t.length!=0&&(i+="?"+l.a.stringify(_)),i},D=e("p46w"),P=e.n(D),g=e("Hg0r").fetch;function c(p){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i={method:"GET"},t=Object(v.a)(Object(v.a)({},i),n);t.headers=Object(v.a)({Accept:"application/json"},t.headers),P.a.get("token")&&(t.headers.token=P.a.get("token"));var a="";return p=="host"?a=_:a=localStorage.getItem("address")?"http://"+localStorage.getItem("address")+"/":_,p=T(p,n.params),t.method=="GET"&&delete t.body,g(a+p,t).then(function(){var R=Object(E.a)(m.a.mark(function L(y){var r,u,O;return m.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=y.status,d.next=3,y.json();case 3:if(u=d.sent,!(y.status>=200&&y.status<300)){d.next=6;break}return d.abrupt("return",u);case 6:if(!(r>=400||r>=500)){d.next=11;break}throw O=new Error,O.response=y,O.data=u,O;case 11:case"end":return d.stop()}},L)}));return function(L){return R.apply(this,arguments)}}()).catch(function(R){var L=503,y="\u94FE\u63A5\u670D\u52A1\u5668\u8D85\u65F6";throw y})}}}]);
